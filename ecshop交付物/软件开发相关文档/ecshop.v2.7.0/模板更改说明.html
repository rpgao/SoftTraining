<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="Content-Type" content="text/html; charset=gb2312" />
<title>ECshopV2.7.0模板更改说明</title>
<style type="text/css">
body{margin:10px; padding:0px; font-size:12px; line-height:20px;}
*{margin:0px; padding:0px;}
h1{font-size:14px; text-align:center; padding-bottom:10px; margin-bottom:15px; border-bottom:1px solid #ccc;}
textarea{border:1px solid #ccc; width:100%; height:150px;}
.f1{color:#ff2200; font-size:14px;}
</style>
</head>
<body>
<h1>ECshopV2.7.0模板更改说明</h1>
<b>一、模板文件：(共32个)</b><br />
1. 新增
<pre>
   <font class="f1"></font>
</pre>
<pre>
   <font class="f1"></font>
</pre>
2.更改
<pre>
   <font class="f1">更改了所有dwt文件</font>
</pre>
修改前：
<textarea name="" rows="" cols="">
<link href="style.css" rel="stylesheet" type="text/css" />
</textarea>
修改后：
<textarea style="height:100px;">
<link href="{$ecs_css_path}" rel="stylesheet" type="text/css" />
        
</textarea>
<br />

<pre>
   <font class="f1">更改了article_cat.dwt文件，加了一段搜索框</font>
</pre>
修改前：
<textarea name="" rows="" cols="">
</textarea>
修改后：
<textarea style="height:100px;">
       <form action="{$search_url}" name="search_form" method="get" class="article_search">
        <input name="keywords" type="text" id="requirement" value="{$search_value}" class="inputBg" />
        <input name="id" type="hidden" value="{$cat_id}" />
        <input type="submit" value="{$lang.button_search}" class="bnt_blue_1" />
      </form>
</textarea>
<br />


<pre>
   <font class="f1">更改了group_buy_goods.dwt文件,改变传递数组变量的名称</font>
</pre>
修改前：
<textarea name="" rows="" cols="">
    <div class="boxCenterList">
      <ul class="group clearfix">
      <li style="margin-right:8px; text-align:center;">
      <a href="{$goods.url}"><img src="{$goods.goods_thumb}" alt="{$goods.goods_name|escape:html}" /></a>
      </li>
      <li style="width:555px; line-height:23px;">
       {$lang.gb_goods_name} <font class="f5">{$goods.goods_name|escape:html}</font><br>
      <!-- {if $cfg.show_goodssn && 0} -->
      {$lang.goods_sn} {$goods.goods_sn}<br>
      <!-- {/if} -->
      <!-- {if $cfg.goods.brand_name && $show_brand && 0} -->
      {$lang.goods_brand} {$goods.brand_name}<br>
      <!--{/if}-->
      <!-- {if $cfg.show_goodsweight && 0} -->
      {$lang.goods_weight} {$goods.goods_weight}<br>
      <!-- {/if} -->
</textarea>
修改后：
<textarea style="height:100px;">
 <div class="boxCenterList">
      <ul class="group clearfix">
      <li style="margin-right:8px; text-align:center;">
      <a href="{$gb_goods.url}"><img src="{$gb_goods.goods_thumb}" alt="{$gb_goods.goods_name|escape:html}" /></a>
      </li>
      <li style="width:555px; line-height:23px;">
       {$lang.gb_goods_name} <font class="f5">{$gb_goods.goods_name|escape:html}</font><br>
      <!-- {if $cfg.show_goodssn && 0} -->
      {$lang.goods_sn} {$gb_goods.goods_sn}<br>
      <!-- {/if} -->
      <!-- {if $cfg.goods.brand_name && $show_brand && 0} -->
      {$lang.goods_brand} {$gb_goods.brand_name}<br>
      <!--{/if}-->
      <!-- {if $cfg.show_goodsweight && 0} -->
      {$lang.goods_weight} {$gb_goods.goods_weight}<br>
      <!-- {/if} --> 
</textarea>
<br />



<pre>
   <font class="f1">更改了auction.dwt文件,改变传递数组变量的名称</font>
</pre>
修改前：
<textarea name="" rows="" cols="">
<a href="{$goods.url}"><img src="{$goods.goods_thumb}" alt="{$goods.goods_name|escape:html}" /></a>
</textarea>
修改后：
<textarea style="height:100px;">
<a href="{$auction_goods.url}"><img src="{$auction_goods.goods_thumb}" alt="{$auction_goods.goods_name|escape:html}" /></a> 
</textarea>
<br />



<pre>
   <font class="f1">更改了snatch.dwt文件,改变传递数组变量的名称</font>
</pre>
修改前：
<textarea name="" rows="" cols="">
      <a href="{$goods.url}"><img src="{$goods.goods_thumb}" alt="{$goods.goods_name|escape:html}" /></a>
      </li>
      <li style="width:555px; line-height:23px;">
       {insert_scripts files='lefttime.js'}
     <a href="{$goods.url}"><strong>{$goods.goods_name|escape:html}</strong></a><br />
     {$lang.shop_price} <font class="shop">{$goods.formated_shop_price}</font><br />
     {$lang.market_price} <font class="market">{$goods.formated_market_price}</font> <br />
     {$lang.residual_time} <font color="red"><span id="leftTime">{$lang.please_waiting}</span></font><br />
     {$lang.activity_desc}：<br />{$goods.desc|escape:html|nl2br}
</textarea>
修改后：
<textarea style="height:100px;">
      <a href="{$snatch_goods.url}"><img src="{$snatch_goods.goods_thumb}" alt="{$snatch_goods.goods_name|escape:html}" /></a>
      </li>
      <li style="width:555px; line-height:23px;">
       {insert_scripts files='lefttime.js'}
     <a href="{$snatch_goods.url}"><strong>{$snatch_goods.goods_name|escape:html}</strong></a><br />
     {$lang.shop_price} <font class="shop">{$snatch_goods.formated_shop_price}</font><br />
     {$lang.market_price} <font class="market">{$snatch_goods.formated_market_price}</font> <br />
     {$lang.residual_time} <font color="red"><span id="leftTime">{$lang.please_waiting}</span></font><br />
     {$lang.activity_desc}：<br />{$snatch_goods.desc|escape:html|nl2br}
</textarea>
<br />
修改前：
<textarea name="" rows="" cols="">
    {$goods.snatch_time}<br />
    {$lang.price_extent}{$goods.formated_start_price} - {$goods.formated_end_price} <br />
    {$lang.user_to_use_up}{$goods.cost_points} {$points_name}<br />
    {$lang.snatch_victory_desc}<br />
    <!--{if $goods.max_price neq 0}-->    {$lang.price_less_victory}{$goods.formated_max_price}，{$lang.price_than_victory}{$goods.formated_max_price}，{$lang.or_can}{$goods.formated_max_price}{$lang.shopping_product}。
</textarea>
修改后：
<textarea style="height:100px;">
    {$snatch_goods.snatch_time}<br />
    {$lang.price_extent}{$snatch_goods.formated_start_price} - {$snatch_goods.formated_end_price} <br />
    {$lang.user_to_use_up}{$snatch_goods.cost_points} {$points_name}<br />
    {$lang.snatch_victory_desc}<br />
    <!--{if $snatch_goods.max_price neq 0}-->    {$lang.price_less_victory}{$snatch_goods.formated_max_price}，{$lang.price_than_victory}{$snatch_goods.formated_max_price}，{$lang.or_can}{$snatch_goods.formated_max_price}{$lang.shopping_product}。
</textarea>
<br />
修改前：
<textarea name="" rows="" cols="">
var gmt_end_time = {$goods.gmt_end_time|default:0};
</textarea>
修改后：
<textarea style="height:100px;">
var gmt_end_time = {$snatch_goods.gmt_end_time|default:0};
</textarea>
<br />

<pre>
   <font class="f1">在category.dwt中添加此部分，应该在重新设计后放到一个新建库文件中</font>
</pre>
修改前：
<textarea name="" rows="" cols="">
  <div class="AreaR">
   <!-- TemplateBeginEditable name="右边区域" -->
</textarea>
修改后：
<textarea style="height:100px;">
  <div class="AreaR">

    <div class="screen_border">
        <h3><span>{$lang.goods_filter}</span></h3>  
        <div class="screeBox">
    <strong>{$lang.brand}：</strong>
    <!--{foreach from=$brands item=brand}-->
      <!-- {if $brand.selected} -->
      <span>{$brand.brand_name}</span>
      <!-- {else} -->
      <a href="{$brand.url}">{$brand.brand_name}</a>&nbsp;
      <!-- {/if} -->
    <!--{/foreach}-->
    </div>
    <div class="screeBox">
    <strong>{$lang.price}：</strong>
    <!--{foreach from=$price_grade item=grade}-->
      <!-- {if $grade.selected} -->
      <span>{$grade.price_range}</span>
      <!-- {else} -->
      <a href="{$grade.url}">{$grade.price_range}</a>&nbsp;
      <!-- {/if} -->
    <!--{/foreach}-->
    </div>
    <!--{foreach from=$filter_attr_list item=filter_attr}-->
    <div class="screeBox">
    <strong>{$filter_attr.filter_attr_name|escape:html} :</strong>
    <!--{foreach from=$filter_attr.attr_list item=attr}-->
      <!-- {if $attr.selected} -->
      <span>{$attr.attr_value}</span>
      <!-- {else} -->
      <a href="{$attr.url}">{$attr.attr_value}</a>&nbsp;
      <!-- {/if} -->
    <!--{/foreach}-->
    </div>
    <!--{/foreach}--> 
    </div>

   <!-- TemplateBeginEditable name="右边区域" -->
</textarea>
<br />


<pre>
   <font class="f1">修改flow.dwt中购物中会员注册的部分</font>
</pre>
修改前：
<textarea name="" rows="" cols="">
        <!-- {if $step eq "login"} -->
        {insert_scripts files='utils.js'}
</textarea>
修改后：
<textarea style="height:100px;">
        <!-- {if $step eq "login"} -->
        {insert_scripts files='utils.js,user.js'}
</textarea>
<br />
修改前：
<textarea name="" rows="" cols="">
            <h6><span>用户注册：</span></h6>
            <form action="flow.php?step=login" method="post" name="registerForm" id="registerForm" onsubmit="return checkSignupForm(this)">
               <table width="90%" border="0" cellpadding="8" cellspacing="1" bgcolor="#B0D8FF" class="table">
                  <tr>
                    <td bgcolor="#ffffff"><div align="right"><strong>{$lang.username}</strong></div></td>
                    <td bgcolor="#ffffff"><input name="username" type="text" class="inputBg" id="username" /></td>
                  </tr>
                  <tr>
                    <td bgcolor="#ffffff"><div align="right"><strong>{$lang.email_address}</strong></div></td>
                    <td bgcolor="#ffffff"><input name="email" type="text" class="inputBg" id="email" /></td>
                  </tr>
                  <tr>
                    <td bgcolor="#ffffff"><div align="right"><strong>{$lang.password}</strong></div></td>
                    <td bgcolor="#ffffff"><input name="password" class="inputBg" type="password" id="password" /></td>
                  </tr>
                  <tr>
                    <td bgcolor="#ffffff"><div align="right"><strong>{$lang.confirm_password}</strong></div></td>
                    <td bgcolor="#ffffff"><input name="confirm_password" class="inputBg" type="password" id="confirm_password" /></td>
                  </tr>
                  <!-- 判断是否启用验证码{if $enabled_register_captcha} -->
                  <tr>
                    <td bgcolor="#ffffff"><div align="right"><strong>{$lang.comment_captcha}:</strong></div></td>
                    <td bgcolor="#ffffff"><input type="text" size="8" name="captcha" class="inputBg" />
                    <img src="captcha.php?{$rand}" alt="captcha" style="vertical-align: middle;cursor: pointer;" onClick="this.src='captcha.php?'+Math.random()" /> </td>
                  </tr>
                  <!--{/if}-->
                  <tr>
                    <td colspan="2" bgcolor="#ffffff" align="center">
                        <input type="submit" name="register" class="bnt_blue_1" value="{$lang.forthwith_register}" />
</textarea>
修改后：
<textarea style="height:100px;">
            <h6><span>用户注册：</span></h6>
            <form action="flow.php?step=login" method="post" name="formUser" id="registerForm" onsubmit="return checkSignupForm(this)">
               <table width="90%" border="0" cellpadding="8" cellspacing="1" bgcolor="#B0D8FF" class="table">
                  <tr>
                    <td bgcolor="#ffffff"><div align="right"><strong>{$lang.username}</strong></div></td>
                    <td bgcolor="#ffffff"><input name="username" type="text" class="inputBg" id="username" onblur="is_registered(this.value);" />
            <span id="username_notice" style="color:#FF0000"></span></td>
                  </tr>
                  <tr>
                    <td bgcolor="#ffffff"><div align="right"><strong>{$lang.email_address}</strong></div></td>
                    <td bgcolor="#ffffff"><input name="email" type="text" class="inputBg" id="email" onblur="checkEmail(this.value);" />
            <span id="email_notice" style="color:#FF0000"></span></td>
                  </tr>
                  <tr>
                    <td bgcolor="#ffffff"><div align="right"><strong>{$lang.password}</strong></div></td>
                    <td bgcolor="#ffffff"><input name="password" class="inputBg" type="password" id="password" onblur="check_password(this.value);" onkeyup="checkIntensity(this.value)" />
            <span style="color:#FF0000" id="password_notice"></span></td>
                  </tr>
                  <tr>
                    <td bgcolor="#ffffff"><div align="right"><strong>{$lang.confirm_password}</strong></div></td>
                    <td bgcolor="#ffffff"><input name="confirm_password" class="inputBg" type="password" id="confirm_password" onblur="check_conform_password(this.value);" />
            <span style="color:#FF0000" id="conform_password_notice"></span></td>
                  </tr>
                  <!-- 判断是否启用验证码{if $enabled_register_captcha} -->
                  <tr>
                    <td bgcolor="#ffffff"><div align="right"><strong>{$lang.comment_captcha}:</strong></div></td>
                    <td bgcolor="#ffffff"><input type="text" size="8" name="captcha" class="inputBg" />
                    <img src="captcha.php?{$rand}" alt="captcha" style="vertical-align: middle;cursor: pointer;" onClick="this.src='captcha.php?'+Math.random()" /> </td>
                  </tr>
                  <!--{/if}-->
                  <tr>
                    <td colspan="2" bgcolor="#ffffff" align="center">
                        <input type="submit" name="Submit" class="bnt_blue_1" value="{$lang.forthwith_register}" />
</textarea>
<br />
修改前：
<textarea name="" rows="" cols="">
</body>
</html>
</textarea>
修改后：
<textarea style="height:100px;">
</body>
<script type="text/javascript">
var process_request = "{$lang.process_request}";
{foreach from=$lang.passport_js item=item key=key}
var {$key} = "{$item}";
{/foreach}
var username_exist = "{$lang.username_exist}";
</script>
</html>
</textarea>
<br />
修改前：
<textarea name="" rows="" cols="">
var username_exist = "{$lang.username_exist}";
</script>
</html>
</textarea>
修改后：
<textarea style="height:100px;">
var username_exist = "{$lang.username_exist}";
var compare_no_goods = "{$lang.compare_no_goods}";
var btn_buy = "{$lang.btn_buy}";
var is_cancel = "{$lang.is_cancel}";
var select_spe = "{$lang.select_spe}";
</script>
</html>
</textarea>
<br />
修改前：
<textarea name="" rows="" cols="">
            <td bgcolor="#ffffff" align="center" width="100"><a href="javascript:collect_to_flow({$goods.goods_id})" class="f6">{$lang.collect_to_flow}</a></td>
</textarea>
修改后：
<textarea style="height:100px;">
            <td bgcolor="#ffffff" align="center" width="100"><a href="javascript:addToCart({$goods.goods_id})" class="f6">{$lang.collect_to_flow}</a></td>
</textarea>
<br />
修改前：
<textarea name="" rows="" cols="">
              <td bgcolor="#ffffff">
              <a href="goods.php?id={$goods.goods_id}" target="_blank" class="f6">{$goods.goods_name}</a>
                <!-- {if $goods.parent_id > 0} -->
                <span style="color:#FF0000">（{$lang.accessories}）</span>
                <!-- {elseif $goods.is_gift} -->
                <span style="color:#FF0000">（{$lang.largess}）</span>
                <!-- {/if} -->
              </td>
</textarea>
修改后：
<textarea style="height:100px;">
              <td bgcolor="#ffffff">
              <!-- {if $goods.goods_id gt 0 && $goods.extension_code eq 'package_buy'} -->
                <a href="javascript:void(0)" onclick="setSuitShow({$goods.goods_id})" class="f6">{$goods.goods_name}<span style="color:#FF0000;">（{$lang.remark_package}）</span></a>
                <div id="suit_{$goods.goods_id}" style="display:none">
                    <!-- {foreach from=$goods.package_goods_list item=package_goods_list} -->
                <a href="goods.php?id={$package_goods_list.goods_id}" target="_blank" class="f6">{$package_goods_list.goods_name}</a><br />
                    <!-- {/foreach} -->
                </div>
              <!-- { else } -->
                <a href="goods.php?id={$goods.goods_id}" target="_blank" class="f6">{$goods.goods_name}</a>
                  <!-- {if $goods.parent_id > 0} -->
                  <span style="color:#FF0000">（{$lang.accessories}）</span>
                  <!-- {elseif $goods.is_gift} -->
                  <span style="color:#FF0000">（{$lang.largess}）</span>
                  <!-- {/if} -->
              <!-- {/if} -->
              </td>
</textarea>
<br />

<pre>
   <font class="f1">修改user_passport.dwt中注册自定义部分</font>
</pre>
修改前：
<textarea name="" rows="" cols="">
        <tr>
          <td align="right">{$lang.other_mobile_phone}</td>
          <td>
          <input name="other[mobile_phone]" type="text" size="25" class="inputBg" />
          </td>
        </tr>
    <!-- {foreach from=$extend_info_list item=field name=extend_info} -->
        <tr>
          <td align="right">{$field}</td>
          <td>
          <input name="extend_field{$smarty.foreach.extend_info.index}" type="text" size="25" class="inputBg" />
          </td>
        </tr>
    <!-- {/foreach} -->
      <!-- 判断是否启用验证码{if $enabled_captcha} -->
</textarea>
修改后：
<textarea style="height:100px;">
        <tr>
          <td align="right">{$lang.other_mobile_phone}</td>
          <td>
          <input name="other[mobile_phone]" type="text" size="25" class="inputBg" />
          </td>
        </tr>
        <!-- {foreach from=$extend_info_list item=field} -->
        <tr>
          <td align="right">{$field.reg_field_name}</td>
          <td>
          <input name="extend_field{$field.id}" type="text" size="25" class="inputBg" />
          </td>
        </tr>
        <!-- {/foreach} -->
      <!-- 判断是否启用验证码{if $enabled_captcha} -->   
</textarea>
<br />

<pre>
   <font class="f1">修改user_transactions.dwt </font>
</pre>
修改前：
<textarea name="" rows="" cols="">
            <tr>
              <td width="28%" align="right" bgcolor="#FFFFFF">{$lang.other_mobile_phone}：</td>
              <td width="72%" align="left" bgcolor="#FFFFFF"><input name="other[mobile_phone]" type="text" value="{$profile.mobile_phone}" class="inputBg" />
              </td>
            </tr>
{foreach from=$extend_info_list item=field name=extend_info}
<tr>
  <td width="28%" align="right" bgcolor="#FFFFFF">{$field}：</td>
  <td width="72%" align="left" bgcolor="#FFFFFF">
  <input name="extend_field{$smarty.foreach.extend_info.index}" type="text" class="inputBg" value="{$profile.extend_info.$smarty.foreach.extend_info.index}"/>
  </td>
</tr>
{/foreach}
            <tr>
              <td colspan="2" align="center" bgcolor="#FFFFFF"><input name="act" type="hidden" value="act_edit_profile" />
                <input name="submit" type="submit" value="{$lang.confirm_edit}" class="bnt_blue_1" style="border:none;" />
              </td>
            </tr>
</textarea>
修改后：
<textarea style="height:100px;">
                <tr>
                  <td width="28%" align="right" bgcolor="#FFFFFF">{$lang.other_mobile_phone}：</td>
                  <td width="72%" align="left" bgcolor="#FFFFFF"><input name="other[mobile_phone]" type="text" value="{$profile.mobile_phone}" class="inputBg" />
                  </td>
                </tr>
                {foreach from=$extend_info_list item=field}
                <tr>
                  <td width="28%" align="right" bgcolor="#FFFFFF">{$field.reg_field_name}：</td>
                  <td width="72%" align="left" bgcolor="#FFFFFF">
                  <input name="extend_field{$field.id}" type="text" class="inputBg" value="{$field.content}"/>
                  </td>
                </tr>
                {/foreach}
                <tr>
                  <td colspan="2" align="center" bgcolor="#FFFFFF"><input name="act" type="hidden" value="act_edit_profile" />
                    <input name="submit" type="submit" value="{$lang.confirm_edit}" class="bnt_blue_1" style="border:none;" />
                  </td>
                </tr>
</textarea>
<br />

<pre>
   <font class="f1">修改message_board.dwt </font>
</pre>
修改前：
<textarea name="" rows="" cols="">
            <!-- 判断是否启用验证码{if $enabled_captcha} -->
</textarea>
修改后：
<textarea style="height:100px;">
            <!-- 判断是否启用验证码{if $enabled_mes_captcha} -->
</textarea>
<br />

<pre>
   <font class="f1">添加compare.dwt中购买弹出层的语言变量 </font>
</pre>
修改前：
<textarea name="" rows="" cols="">
<script language="javascript">
function remove(id, url)
{
  if (document.getCookie("compareItems") != null)
  {
    var obj = document.getCookie("compareItems").parseJSON();
    delete obj[id];
    var date = new Date();
    date.setTime(date.getTime() + 99999999);
    document.setCookie("compareItems", obj.toJSONString());
  }
}
</script>
</textarea>
修改后：
<textarea style="height:100px;">
<script language="javascript">
function remove(id, url)
{
  if (document.getCookie("compareItems") != null)
  {
    var obj = document.getCookie("compareItems").parseJSON();
    delete obj[id];
    var date = new Date();
    date.setTime(date.getTime() + 99999999);
    document.setCookie("compareItems", obj.toJSONString());
  }
}

var compare_no_goods = "{$lang.compare_no_goods}";
var btn_buy = "{$lang.btn_buy}";
var is_cancel = "{$lang.is_cancel}";
var select_spe = "{$lang.select_spe}";
</script>
</textarea>
<br />

<pre>
   <font class="f1">添加user_clips.dwt中购买弹出层的语言变量</font>
</pre>
修改前：
<textarea name="" rows="" cols="">
          if (Browser.isIE)
          {
              window.clipboardData.setData("Text",code);
          }
      }
  </script>
</textarea>
修改后：
<textarea style="height:100px;">
          if (Browser.isIE)
          {
              window.clipboardData.setData("Text",code);
          }
      }
  var compare_no_goods = "{$lang.compare_no_goods}";
  var btn_buy = "{$lang.btn_buy}";
  var is_cancel = "{$lang.is_cancel}";
  var select_spe = "{$lang.select_spe}";
  </script>
</textarea>
<br />

<pre>
   <font class="f1">修改search.dwt中隐藏脱销的选择项</font>
</pre>
修改前：
<textarea name="" rows="" cols="">
        <td><label for="outstock"><input type="checkbox" name="outstock" value="1" id="outstock" /> {$lang.hidden_outstock}</label>
</textarea>
修改后：
<textarea style="height:100px;">
        <td><label for="outstock"><input type="checkbox" name="outstock" value="1" id="outstock" <!-- {if $outstock} -->checked="checked"<!--{/if}-->/> {$lang.hidden_outstock}</label>
</textarea>
<br />
修改前：
<textarea name="" rows="" cols="">
          fixpng();
        }
        </script>
</textarea>
修改后：
<textarea style="height:100px;">
          fixpng();
        }
    var btn_buy = "{$lang.btn_buy}";
    var is_cancel = "{$lang.is_cancel}";
    var select_spe = "{$lang.select_spe}";
        </script>
</textarea>
<br />

<pre>
   <font class="f1">修改pick_out.dwt中购买选择层不弹出</font>
</pre>
修改前：
<textarea name="" rows="" cols="">
var {$key} = "{$item}";
{/foreach}
<!-- {literal} -->
</textarea>
修改后：
<textarea style="height:100px;">
var {$key} = "{$item}";
{/foreach}

var btn_buy = "{$lang.btn_buy}";
var is_cancel = "{$lang.is_cancel}";
var select_spe = "{$lang.select_spe}";
<!-- {literal} -->
</textarea>
<br />

<pre>
   <font class="f1">:</font>
</pre>
修改前：
<textarea name="" rows="" cols="">

</textarea>
修改后：
<textarea style="height:100px;">

</textarea>
<br />

<b>一、库文件：(共 个)</b><br />
1.新增
<pre>
   <font class="f1"></font>
</pre>
2.更改
<br />

<pre>
   <font class="f1">history.lbi增加图片显示及清空按钮</font>
</pre>
修改前：
<textarea>
<meta http-equiv="Content-Type" content="text/html; charset=GBK">
<div class="box">
 <div class="box_1">
  <h3><span>{$lang.view_history}</span></h3>
  <div class="boxCenterList RelaArticle">
     <ul class="clearfix" id="history">
    {insert name='history'}
    </ul>
  </div>
 </div>
</div>
<div class="blank5"></div>
</textarea>
修改后：
<textarea>
<meta http-equiv="Content-Type" content="text/html; charset=GBK">

<div class="box" id='history_div'>
 <div class="box_1">
  <h3><span>{$lang.view_history}</span></h3>
  <div class="boxCenterList clearfix" id='history_list'>
    {insert name='history'}
  </div>
 </div>
</div>
<div class="blank5"></div>
<script type="text/javascript">
if (document.getElementById('history_list').innerHTML.replace(/\s/g,'').length<1)
{
    document.getElementById('history_div').style.display='none';
}
else
{
    document.getElementById('history_div').style.display='block';
}
function clear_history()
{
Ajax.call('user.php', 'act=clear_history',clear_history_Response, 'GET', 'TEXT',1,1);
}
function clear_history_Response(res)
{
document.getElementById('history_list').innerHTML = '{$lang.no_history}';
}
</script>
</textarea>
<br />

<pre>
   <font class="f1">top10.lbi销售排行增加图片显示</font>
</pre>
修改前：
<textarea>
<meta http-equiv="Content-Type" content="text/html; charset=gbk">
<div class="box">
 <div class="box_2">
  <div class="top10Tit"></div>
  <div class="top10List">
   <ul>
    <!-- {foreach name=top_goods from=$top_goods item=goods}-->
    <li><img src="../images/top_{$smarty.foreach.top_goods.iteration}.gif" /> <a href="{$goods.url}" title="{$goods.name|escape:html}">{$goods.short_name}</a></li>
    <!--{/foreach}-->
   </ul>
  </div>
 </div>
</div>
<div class="blank5"></div>
</textarea>
修改后：
<textarea>
<meta http-equiv="Content-Type" content="text/html; charset=gbk">
<div class="box">
 <div class="box_1">
  <div class="top10Tit"></div>
  <div class="boxCenterList clearfix">
  <!-- {foreach name=top_goods from=$top_goods item=goods}-->
  <ul class="clearfix">
      <li class="goodsimg">
      <a href="{$goods.url}"><img src="{$goods.thumb}" alt="{$goods.name|escape:html}" class="B_blue" /></a>
      </li>
      <li>
      <a href="{$goods.url}" title="{$goods.name|escape:html}">{$goods.short_name}</a><br />
      {$lang.shop_price}<font class="f1">{$goods.price}</font><br />
      </li>
    </ul>
  <!-- {/foreach} -->
  </div>
 </div>
</div>
<div class="blank5"></div>
</textarea>
<br />

<pre>
   <font class="f1">goods_attrlinked.lbi属性关联的商品显示图片</font>
</pre>
修改前：
<textarea>
<meta http-equiv="Content-Type" content="text/html; charset=GBK">
<!-- 开始循环属性关联的商品 {foreach from=$attribute_linked item=linked}-->
<!-- {if $linked.goods} -->
<div class="box">
 <div class="box_1">
  <h3><span title="{$linked.title}">{$linked.title|truncate:11:"...":true}</span></h3>
  <div class="boxCenterList RelaArticle">
  <!-- {foreach from=$linked.goods item=linked_goods_data} -->
  <a href="{$linked_goods_data.url}" title="{$linked_goods_data.goods_name|escape:html}">{$linked_goods_data.short_name|escape:html}</a><br />
  <!-- {/foreach} -->
  </div>
 </div>
</div>
<div class="blank5"></div>
<!-- {/if} -->
<!-- 结束属性关联的商品 {/foreach}-->
</textarea>
修改后：
<textarea>
<meta http-equiv="Content-Type" content="text/html; charset=GBK">
<!-- 开始循环属性关联的商品 {foreach from=$attribute_linked item=linked}-->
<!-- {if $linked.goods} -->
<div class="box">
 <div class="box_1">
  <h3><span title="{$linked.title}">{$linked.title|truncate:11:"...":true}</span></h3>
  <div class="boxCenterList clearfix">
  <!-- {foreach from=$linked.goods item=linked_goods_data} -->
  <ul class="clearfix">
      <li class="goodsimg">
      <a href="{$linked_goods_data.url}" target="_blank"><img src="{$linked_goods_data.goods_thumb}" alt="{$linked_goods_data.name|escape:html}" class="B_blue" /></a>
      </li>
      <li>
      <a href="{$linked_goods_data.url}" target="_blank" title="{$goods.linked_goods_data_name|escape:html}">{$linked_goods_data.short_name|escape:html}</a><br />
      {$lang.shop_price}<font class="f1">{$linked_goods_data.shop_price}</font><br />
      </li>
    </ul>
  <!-- {/foreach} -->
  </div>
 </div>
</div>
<div class="blank5"></div>
<!-- {/if} -->
<!-- 结束属性关联的商品 {/foreach}-->
</textarea>
<br />

<pre><span class="f1">category_tree.lbi</span>
   
</pre>
修改前：
<textarea>
{foreach from=$cat.children item=child}
</textarea>
修改后：
<textarea>
{foreach from=$cat.cat_id item=child}
</textarea>
<br />

<pre>
   <font class="f1">page_footer.lbi版权信息</font>
</pre>
修改前：
<textarea>
      <a href="http://www.ecshop.com" target="_blank" style="font-size:10px">Powered by <strong><span style="color: #3366FF">ECShop</span> <span style="color: #FF9966">{$ecs_version}</span></strong></a>
</textarea>
修改后：
<textarea>
 {foreach from=$lang.p_y item=pv}{$pv}{/foreach}
</textarea>
<br />

<pre>
   <font class="f1">goods_list.lbi 添加js的语言项</font>
</pre>
修改前：
<textarea>  
</textarea>
修改后：
<textarea>
var btn_buy = "{$lang.btn_buy}";
var is_cancel = "{$lang.is_cancel}";
var select_spe = "{$lang.select_spe}";
</textarea>
<br />


<pre>
   <font class="f1">start.htm 修改了api发送数据，增加了js滚动</font>
</pre>
修改前：
<textarea>
{if $need_check_version}
<script type="text/javascript" src="http://api.ecshop.com/checkver.php?ver={$ecs_version}&lang={$ecs_lang}&release={$ecs_release}&php_ver={$sys_info.php_ver}&mysql_ver={$sys_info.mysql_ver}&ocount={$order.stats.oCount}&oamount={$order.stats.oAmount}&gcount={$goods.total}"></script>
{/if}
</textarea>
修改后：
<textarea>
  {if $need_check_version}
  <script type="text/javascript" src="http://api.ecshop.com/checkver.php?ver={$ecs_version}&lang={$ecs_lang}&release={$ecs_release}&php_ver={$sys_info.php_ver}&mysql_ver={$sys_info.mysql_ver}&ocount={$order.stats.oCount}&oamount={$order.stats.oAmount}&gcount={$goods.total}&charset={$ecs_charset}&usecount={$ecs_user}&template={$ecs_template}&style={$ecs_style}"></script>
  {/if}
<script type="text/javascript"> 
var Mar = document.getElementById("Marquee"); 
Mar.style.height = "30px";
var child_div=Mar.getElementsByTagName("div") 

var picH = 20;//移动高度 
var scrollstep=2;//移动步幅,越大越快 
var scrolltime=30;//移动频度(毫秒)越大越慢 
var stoptime=4000;//间断时间(毫秒) 
var tmpH = 0; 

function start()
{ 
  if(tmpH < picH)
  { 
    tmpH += scrollstep; 
    if(tmpH > picH )tmpH = picH ; 
    Mar.scrollTop = tmpH; 
    setTimeout(start,scrolltime); 
  }
  else
  { 
    tmpH = 0; 
    Mar.appendChild(child_div[0]); 
    Mar.scrollTop = 0; 
    setTimeout(start,stoptime); 
  } 
} 
setTimeout(start,stoptime); 
</script>
</textarea>

<pre>
   <font class="f1">main.css 添加文字滚动样式</font>
</pre>
修改前：
<textarea>  
</textarea>
修改后：
<textarea>
#Marquee{ 
  height:20px; 
  overflow:hidden;  
  border: 1px solid #CC0000;
  background: #FFFFCC;
  margin-bottom: 5px;
}
  
#Marquee div{ 
  background: #FFFFCC;
  padding: 10px;
  margin-bottom: 5px;
  }
</textarea>
<br />


<pre>
   <font class="f1">index.dwt 修改主广告引用方式</font>
</pre>
修改前：
<textarea>
  <div style="float:left;width:377px;margin-top:5px;">
  <script type="text/javascript">

  var swf_width=377;
  var swf_height=165;

  </script>
  <script type="text/javascript" src="data/flashdata/{$flash_theme}/cycle_image.js"></script>
  </div>
</textarea>
修改后：
<textarea>
       <div class="f_l" id="focus">
         <!-- #BeginLibraryItem "/library/index_ad.lbi" --><!-- #EndLibraryItem -->
       </div>
</textarea>
<br />

<pre>
   <font class="f1">增加新模板库文件 index_ad.lbi</font>
</pre>
修改前：
<textarea>

</textarea>
修改后：
<textarea>

</textarea>
<br />


<pre>
   <font class="f1">修改message_list.lbi文件 修改留言的关联商品信息和评价等级</font>
</pre>
修改前：
<textarea>
      <!--{foreach name=message_lists from=$msg_lists key=key item=msg}-->
      <div class="f_l">
      [<b>{$msg.msg_type}</b>]&nbsp;{$msg.user_name}：&nbsp;&nbsp;<font class="f4">{$msg.msg_title}</font> ({$msg.msg_time})
      </div>
      <div class="msgBottomBorder word">
      {$msg.msg_content}<br>
      <!-- {if $msg.re_msg_content} -->
       <font class="f2">{$lang.shopman_reply}</font><br />
       {$msg.re_msg_content}
      <!-- {/if} -->
      </div>
      <!--{/foreach}-->
</textarea>
修改后：
<textarea>
      <!--{foreach name=message_lists from=$msg_lists key=key item=msg}-->
      <div class="f_l" style="width:100%; position:relative;">
      [<b>{$msg.msg_type}</b>]&nbsp;{$msg.user_name}<!-- {if $msg.user_name eq ''} -->{$lang.anonymous}<!-- {/if} -->：<!-- {if $msg.id_value gt 0} -->{$lang.feed_user_comment}<b><a class="f3" href="./goods.php?id={$msg.id_value}" target="_blank" title="{$msg.goods_name}">{$msg.goods_name}</a></b><!-- {/if} --><font class="f4">{$msg.msg_title}</font> ({$msg.msg_time})<!-- {if $msg.comment_rank gt 0} --><img style="position:absolute; right:0px;" src="../images/stars{$msg.comment_rank}.gif" alt="{$msg.comment_rank}" /><!-- {/if} -->
      </div>
      <div class="msgBottomBorder word">
      {$msg.msg_content}<br>
      <!-- {if $msg.re_content} -->
       <font class="f2">{$lang.shopman_reply}</font><br />
       {$msg.re_content}
      <!-- {/if} -->
      </div>
      <!--{/foreach}-->  
</textarea>
<br />


<pre>
   <font class="f1">修改cat_articles.lbi文件，修改一个文件中重复出现的变量名称</font>
</pre>
修改前：
<textarea>
  <div class="boxCenterList RelaArticle">
  <!--{foreach from=$articles item=article}-->
  <a href="{$article.url}" title="{$article.title|escape:html}">{$article.short_title}</a> {$article.add_time}<br />
  <!--{/foreach}-->
</textarea>
修改后：
<textarea>
  <div class="boxCenterList RelaArticle">
  <!--{foreach from=$articles item=article_item}-->
  <a href="{$article_item.url}" title="{$article_item.title|escape:html}">{$article_item.short_title}</a> {$article_item.add_time}<br />
  <!--{/foreach}-->
</textarea>


</body>
</html>
