<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="Content-Type" content="text/html; charset=gb2312" />
<title>ECshopV2.6.1模板更改说明</title>
<style type="text/css">
body{margin:10px; padding:0px; font-size:12px; line-height:20px;}
*{margin:0px; padding:0px;}
h1{font-size:14px; text-align:center; padding-bottom:10px; margin-bottom:15px; border-bottom:1px solid #ccc;}
textarea{border:1px solid #ccc; width:100%; height:150px;}
.f1{color:#ff2200; font-size:14px;}
</style>
</head>
<body>
<h1>ECshopV2.6.1模板更改说明</h1>
<b>一、模板文件：(共32个)</b><br />
1. 新增
<pre>
   <font class="f1">新增报价单打印模板--quotation.dwt</font> 
</pre>
<pre>
   <font class="f1">新增留言板模板--message_board.dwt</font>	 
</pre>
<pre>
   <font class="f1">新增品牌列表模板--brand_list.dwt</font>	 
</pre>
1.更改
<pre>
   <font class="f1">index.dwt:</font>
       flash播放器修改:
	新增三种不同风格的flash播放器；
			 
</pre>
修改前：
<textarea name="" rows="" cols="">
	<script type="text/javascript">
  var swf_width=377;
  var swf_height=165;
  // 0xffffff:文字颜色|1:文字位置|0x0066ff:文字背景颜色|60:文字背景透明度|0xffffff:按键文字颜色|0x0066ff:按键默认颜色|0x000033:按键当前颜色|8:自动播放时间(秒)|2:图片过渡效果|1:是否显示按钮|_blank:打开窗口
  var swf_config = "|2|||0xFFFFFF|0xFF6600||4|3|1|_blank"
  document.write('<object classid="clsid:d27cdb6e-ae6d-11cf-96b8-444553540000" codebase="http://fpdownload.macromedia.com/pub/shockwave/cabs/flash/swflash.cab#version=6,0,0,0" width="'+ swf_width +'" height="'+ swf_height +'">');
  document.write('<param name="movie" value="data/images/bcastr.swf?bcastr_xml_url=cycle_image.php"><param name="quality" value="high">');
  document.write('<param name="menu" value="false"><param name=wmode value="opaque">');
  document.write('<param name="FlashVars" value="bcastr_config='+swf_config+'">');
  document.write('<embed src="data/images/bcastr.swf?bcastr_xml_url=cycle_image.php" wmode="opaque" FlashVars="bcastr_config='+swf_config+'" menu="false" quality="high" width="'+ swf_width +'" height="'+ swf_height +'" type="application/x-shockwave-flash" pluginspage="http://www.macromedia.com/go/getflashplayer" />');
  document.write('</object>');
  </script>
</textarea>
修改后：
<textarea style="height:100px;">
<script type="text/javascript">
var swf_width=484;
var swf_height=200;
</script>
<script type="text/javascript" src="data/flashdata/{$flash_theme}/cycle_image.js"></script>
</textarea>
<br />
<pre>
   <font class="f1">user_passport.dwt:</font>
      判断是否关闭用户注册
			 
</pre>
修改前：
<textarea>
 <!--*会员注册界面-->
    <!--{if $action eq 'register'}-->
    {insert_scripts files='utils.js'}
    <form action="user.php" method="post" name="formUser" onsubmit="return register();">
      <br />
      <table width="70%"  border="0" align="center">
        <tr>
          <td width="43%" align="right"><strong>{$lang.label_username}:</strong></td>
          <td width="57%"><input name="username" type="text" id="username" onblur="is_registered(this.value);"/>
            <span id="username_notice" style="color:#FF0000"> *</span></td>
        </tr>
        <tr>
          <td align="right"><strong>{$lang.label_email}:</strong></td>
          <td><input name="email" type="text" id="email" onblur="checkEmail(this.value);"/>
            <span id="email_notice" style="color:#FF0000"> *</span></td>
        </tr>
        <tr>
          <td align="right"><strong>{$lang.label_password}:</strong></td>
          <td><input name="password" type="password" id="password" onblur="check_password(this.value);" onkeyup="checkIntensity(this.value)" />
            <span style="color:#FF0000" id="password_notice"> *</span></td>
        </tr>
        <tr>
          <td align="right"><strong>{$lang.label_password_intensity}:</strong></td>
          <td>
            <table width="145" border="0" cellspacing="0" cellpadding="1">
              <tr align="center">
                <td width="33%" id="pwd_lower">{$lang.pwd_lower}</td>
                <td width="33%" id="pwd_middle">{$lang.pwd_middle}</td>
                <td width="33%" id="pwd_high">{$lang.pwd_high}</td>
              </tr>
            </table>
          </td>
        </tr>
        <tr>
          <td align="right"><strong>{$lang.label_confirm_password}:</strong></td>
          <td><input name="confirm_password" type="password" id="conform_password" onblur="check_conform_password(this.value);" />
            <span style="color:#FF0000" id="conform_password_notice"> *</span></td>
        </tr>
        <tr>
          <td align="right"><strong>{$lang.other_msn}:</strong></td>
          <td><input name="other[msn]" type="text" />
           </td>
        </tr>
        <tr>
          <td align="right"><strong>{$lang.other_qq}:</strong></td>
          <td><input name="other[qq]" type="text"  />
           </td>
        </tr>
        <tr>
          <td align="right"><strong>{$lang.other_office_phone}:</strong></td>
          <td><input name="other[office_phone]" type="text"  />
           </td>
        </tr>
        <tr>
          <td align="right"><strong>{$lang.other_home_phone}:</strong></td>
          <td><input name="other[home_phone]" type="text"  />
          </td>
        </tr>
        <tr>
          <td align="right"><strong>{$lang.other_mobile_phone}:</strong></td>
          <td><input name="other[mobile_phone]" type="text"  />
           </td>
        </tr>
      <!-- 判断是否启用验证码{if $enabled_captcha} -->
      <tr>
      <td align="right"><strong>{$lang.comment_captcha}:</strong></td>
      <td><input type="text" size="8" name="captcha" />
      <img src="captcha.php?{$rand}" alt="captcha" style="vertical-align: middle;cursor: pointer;" onClick="this.src='captcha.php?'+Math.random()" /> </td>
      </tr>
      <!--{/if}-->
        <tr>
          <td>&nbsp;</td>
          <td><label>
            <input name="agreement" type="checkbox" value="1" checked="checked" />
            <b>{$lang.agreement}</b></label></td>
        </tr>
        <tr>
          <td colspan="2" align="center"><input name="act" type="hidden" value="act_register" >
            <input name="Submit" type="submit" value="{$lang.confirm_register}"></td>
        </tr>
        <tr>
          <td colspan="2">&nbsp;</td>
        </tr>
        <tr>
          <td>&nbsp;</td>
          <td><li style="border-bottom: 1px dashed #CECECE;width:150px;"> <a href="user.php?act=login">{$lang.want_login}</a></li>
            <li style="border-bottom: 1px dashed #CECECE;width:150px;"> <a href="user.php?act=get_password">{$lang.forgot_password}</a></li></td>
        </tr>
      </table>
      <br />
    </form>
    <!--{/if}-->
    <!--#会员注册界面-->
</textarea>
修改后：
<textarea>
<!--*会员注册界面 start-->
    <!--{if $action eq 'register'}-->
    <!-- {if $shop_reg_closed eq 1} -->
    {$lang.shop_register_closed}
    <!-- {else} -->
    {insert_scripts files='utils.js'}
    <form action="user.php" method="post" name="formUser" onsubmit="return register();">
      <table width="100%"  border="0" align="left" cellpadding="5" cellspacing="3">
        <tr>
          <td width="11%" align="right">{$lang.label_username}</td>
          <td width="89%">
          <input name="username" type="text" size="25" id="username" onblur="is_registered(this.value);" class="inputBg"/>
            <span id="username_notice" style="color:#FF0000"> *</span>
          </td>
        </tr>
        <tr>
          <td align="right">{$lang.label_email}</td>
          <td>
          <input name="email" type="text" size="25" id="email" onblur="checkEmail(this.value);"  class="inputBg"/>
            <span id="email_notice" style="color:#FF0000"> *</span>
          </td>
        </tr>
        <tr>
          <td align="right">{$lang.label_password}</td>
          <td>
          <input name="password" type="password" id="password" onblur="check_password(this.value);" onkeyup="checkIntensity(this.value)" class="inputBg" style="width:179px;" />
            <span style="color:#FF0000" id="password_notice"> *</span>
          </td>
        </tr>
        <tr>
          <td align="right">{$lang.label_password_intensity}</td>
          <td>
            <table width="145" border="0" cellspacing="0" cellpadding="1">
              <tr align="center">
                <td width="33%" id="pwd_lower">{$lang.pwd_lower}</td>
                <td width="33%" id="pwd_middle">{$lang.pwd_middle}</td>
                <td width="33%" id="pwd_high">{$lang.pwd_high}</td>
              </tr>
            </table>
          </td>
        </tr>
        <tr>
          <td align="right">{$lang.label_confirm_password}</td>
          <td>
          <input name="confirm_password" type="password" id="conform_password" onblur="check_conform_password(this.value);"  class="inputBg" style="width:179px;"/>
            <span style="color:#FF0000" id="conform_password_notice"> *</span>
          </td>
        </tr>
        <tr>
          <td align="right">{$lang.other_msn}</td>
          <td>
          <input name="other[msn]" type="text" size="25" class="inputBg" />
           </td>
        </tr>
        <tr>
          <td align="right">{$lang.other_qq}</td>
          <td>
          <input name="other[qq]" type="text" size="25" class="inputBg"/>
           </td>
        </tr>
        <tr>
          <td align="right">{$lang.other_office_phone}</td>
          <td>
          <input name="other[office_phone]" size="25" type="text" class="inputBg"/>
           </td>
        </tr>
        <tr>
          <td align="right">{$lang.other_home_phone}</td>
          <td>
          <input name="other[home_phone]" type="text" size="25" class="inputBg" id="home_phone" onblur="check_home_phone(this.value);" />

          </td>
        </tr>
        <tr>
          <td align="right">{$lang.other_mobile_phone}</td>
          <td>
          <input name="other[mobile_phone]" type="text" size="25" class="inputBg" />
           </td>
        </tr>
      <!-- 判断是否启用验证码{if $enabled_captcha} -->
      <tr>
      <td align="right">{$lang.comment_captcha}</td>
      <td><input type="text" size="8" name="captcha" class="inputBg" />
      <img src="captcha.php?{$rand}" alt="captcha" style="vertical-align: middle;cursor: pointer;" onClick="this.src='captcha.php?'+Math.random()" /> </td>
      </tr>
      <!--{/if}-->
        <tr>
          <td>&nbsp;</td>
          <td><label>
            <input name="agreement" type="checkbox" value="1" checked="checked" />
            {$lang.agreement}</label></td>
        </tr>
        <tr>
          <td>&nbsp;</td>
          <td align="left">
          <input name="act" type="hidden" value="act_register" >
          <input name="Submit" type="submit" value="" class="us_Submit_reg">
          </td>
        </tr>
        <tr>
          <td colspan="2">&nbsp;</td>
        </tr>
        <tr>
          <td>&nbsp;</td>
          <td class="actionSub">
          <a href="user.php?act=login">{$lang.want_login}</a><br />
          <a href="user.php?act=get_password">{$lang.forgot_password}</a>
          </td>
        </tr>
      </table>
    </form>
<!--{/if}-->
<!--{/if}-->
<!--#会员注册界面 end-->
</textarea>
<br />
<pre>
   <font class="f1">goods.dwt:</font>
      1.如果库存为0则显示“缺货”；
      2.可循环属性允许多选；
			 
</pre>
修改前：
<textarea>
<!-- {if $goods.goods_number neq "" and $cfg.show_goodsnumber} -->
<tr>
	<td>{$lang.goods_number}</td>
	<td>{$goods.goods_number} {$goods.measure_unit}</td>
</tr>
<!-- {/if} -->

<!-- {* 开始循环所有可选属性 *} -->
<!-- {foreach from=$specification item=spec key=spec_key} -->
<tr>
	<td valign="top">{$spec.name}:</td>
	<td><!-- {if $cfg.goodsattr_style eq 1} -->
		<!-- {foreach from=$spec.values item=value key=key} -->
		<label for="spec_value_{$value.id}">
		<input type="radio" name="spec_{$spec_key}" value="{$value.id}" id="spec_value_{$value.id}" {if $key eq 0}checked{/if} onclick="changePrice()" />
		{$value.label} [{if $value.price gt 0}{$lang.plus}{elseif $value.price lt 0}{$lang.minus}{/if} {$value.format_price|abs}] </label><br />
		<!-- {/foreach} -->
		<input type="hidden" name="spec_list" value="{$key}" />
		<!-- {else} -->
		<select name="spec_{$spec_key}">
			<!-- {foreach from=$spec.values item=value key=key} -->
			<option label="{$value.label}" value="{$value.id}">{$value.label} {if $value.price gt 0}{$lang.plus}{elseif $value.price lt 0}{$lang.minus}{/if}{if $value.price neq 0}{$value.format_price}{/if}</option>
			<!-- {/foreach} -->
		</select>
		<input type="hidden" name="spec_list" value="{$key}" />
		<!-- {/if} -->                  </td>
</tr>
<!-- {/foreach} -->
<!-- {* 结束循环可选属性 *} -->
</textarea>
修改后：
<textarea>
<!-- {if $goods.goods_number neq "" and $cfg.show_goodsnumber} 商品库存-->
	<!-- {if $goods.goods_number eq 0} -->
		<strong>{$lang.goods_number}</strong>
		<font color='red'>{$lang.stock_up}</font>
	<!-- {else} -->
		<strong>{$lang.goods_number}</strong>
		{$goods.goods_number} {$goods.measure_unit}
	<!-- {/if} -->
<!-- {/if} -->

<!-- {* 开始循环所有可选属性 *} -->
<!-- {foreach from=$specification item=spec key=spec_key} -->
<li class="padd loop">
<strong>{$spec.name}:</strong><br />
	<!-- {* 判断属性是复选还是单选 *} -->
	<!-- {if $spec.attr_type eq 1} -->
		<!-- {if $cfg.goodsattr_style eq 1} -->
			<!-- {foreach from=$spec.values item=value key=key} -->
			<label for="spec_value_{$value.id}">
			<input type="radio" name="spec_{$spec_key}" value="{$value.id}" id="spec_value_{$value.id}" {if $key eq 0}checked{/if} onclick="changePrice()" />
			{$value.label} [{if $value.price gt 0}{$lang.plus}{elseif $value.price lt 0}{$lang.minus}{/if} {$value.format_price|abs}] </label><br />
			<!-- {/foreach} -->
			<input type="hidden" name="spec_list" value="{$key}" />
			<!-- {else} -->
			<select name="spec_{$spec_key}">
				<!-- {foreach from=$spec.values item=value key=key} -->
				<option label="{$value.label}" value="{$value.id}">{$value.label} {if $value.price gt 0}{$lang.plus}{elseif $value.price lt 0}{$lang.minus}{/if}{if $value.price neq 0}{$value.format_price}{/if}</option>
				<!-- {/foreach} -->
			</select>
			<input type="hidden" name="spec_list" value="{$key}" />
		<!-- {/if} -->
	<!-- {else} -->
		<!-- {foreach from=$spec.values item=value key=key} -->
		<label for="spec_value_{$value.id}">
		<input type="checkbox" name="spec_{$spec_key}" value="{$value.id}" id="spec_value_{$value.id}" onclick="changePrice()" />
		{$value.label} [{if $value.price gt 0}{$lang.plus}{elseif $value.price lt 0}{$lang.minus}{/if} {$value.format_price|abs}] </label><br />
		<!-- {/foreach} -->
		<input type="hidden" name="spec_list" value="{$key}" />
	<!-- {/if} -->
</li>
<!-- {/foreach} -->
<!-- {* 结束循环可选属性 *} -->
</textarea>
<br />
<pre>
   <font class="f1">flow.dwt:</font>
      1.购物车内容的商品显示方式（文字，图片，文字+图片）
      2.属性列可选择显示与否

			 
</pre>
修改前：
<textarea>
<table width="100%" border="0" cellpadding="4" cellspacing="1">
	<tr>
		<th>{$lang.goods_name}</th>
		<th>{$lang.goods_attr}</th>
		<!-- {if $show_marketprice} 显示市场价 -->
		<th>{$lang.market_prices}</th>
		<!-- {/if} -->
		<th>{$lang.shop_prices}</th>
		<th>{$lang.number}</th>
		<th>{$lang.subtotal}</th>
		<th>{$lang.handle}</th>
	</tr>
	<!-- {foreach from=$goods_list item=goods} -->
	<tr>
		<td>
			<!-- {if $goods.goods_id gt 0} 商品 -->
			<a href="goods.php?id={$goods.goods_id}" target="_blank">{$goods.goods_name}</a>
				<!-- {if $goods.parent_id gt 0} 配件 -->
				<span style="color:#FF0000">（{$lang.accessories}）</span>
				<!-- {/if} -->
				<!-- {if $goods.is_gift gt 0} 赠品 -->
				<span style="color:#FF0000">（{$lang.largess}）</span>
				<!-- {/if} -->
			<!-- {else} 优惠活动 -->
			{$goods.goods_name}
			<!-- {/if} -->
		</td>
		<td>{$goods.goods_attr|nl2br}</td>
		<!-- {if $show_marketprice} 显示市场价 -->
		<td align="right">{$goods.market_price}</td>
		<!-- {/if} -->
		<td align="right">{$goods.goods_price}</td>
		<td align="right">
			<!-- {if $goods.goods_id gt 0 && $goods.is_gift eq 0 && $goods.parent_id eq 0} 普通商品可修改数量 -->
			<input type="text" name="goods_number[{$goods.rec_id}]" id="goods_number_{$goods.rec_id}" value="{$goods.goods_number}" size="4" style="text-align:right " />
			<!-- {else} -->
			{$goods.goods_number}
			<!-- {/if} -->
		</td>
		<td align="right">{$goods.subtotal}</td>
		<td align="center">
			<a href="javascript:if (confirm('{$lang.drop_goods_confirm}')) location.href='flow.php?step=drop_goods&amp;id={$goods.rec_id}'; ">{$lang.drop}</a>
			<!-- {if $smarty.session.user_id gt 0} 如果登录了，可以加入收藏 -->
			<a href="javascript:if (confirm('{$lang.drop_goods_confirm}')) location.href='flow.php?step=drop_to_collect&amp;id={$goods.rec_id}'; ">{$lang.drop_to_collect}</a>
			<!-- {/if} -->
		</td>
	</tr>
	<!-- {/foreach} -->
</table>
</textarea>
修改后：
<textarea>
<table width="99%" align="center" border="0" cellpadding="5" cellspacing="1" bgcolor="#dddddd">
<tr>
	<th bgcolor="#ffffff">{$lang.goods_name}</th>
	<!-- {if $show_goods_attribute eq 1} 显示商品属性 -->
	<th>{$lang.goods_attr}</th>
	<!-- {/if} -->
	<!-- {if $show_marketprice} 显示市场价 -->
	<th bgcolor="#ffffff">{$lang.market_prices}</th>
	<!-- {/if} -->
	<th bgcolor="#ffffff">{$lang.shop_prices}</th>
	<th bgcolor="#ffffff">{$lang.number}</th>
	<th bgcolor="#ffffff">{$lang.subtotal}</th>
	<th bgcolor="#ffffff">{$lang.handle}</th>
</tr>
<!-- {foreach from=$goods_list item=goods} -->
<tr>
	<td bgcolor="#ffffff" align="center">
		<!-- {if $goods.goods_id gt 0} 商品 -->
		<!-- {if $show_goods_thumb eq 1} -->
			<a href="goods.php?id={$goods.goods_id}" target="_blank" class="f6">{$goods.goods_name}</a>
		<!-- {elseif $show_goods_thumb eq 2} -->
			<a href="goods.php?id={$goods.goods_id}" target="_blank"><img src="{$goods.goods_thumb}" border="0" title="{$goods.goods_name|escape:html}" /></a>
		<!-- {else} -->
			<a href="goods.php?id={$goods.goods_id}" target="_blank"><img src="{$goods.goods_thumb}" border="0" title="{$goods.goods_name|escape:html}" /></a><br />
			<a href="goods.php?id={$goods.goods_id}" target="_blank" class="f6">{$goods.goods_name}</a>
		<!-- {/if} -->
		<!-- {if $goods.parent_id gt 0} 配件 -->
		<span style="color:#FF0000">（{$lang.accessories}）</span>
		<!-- {/if} -->
		<!-- {if $goods.is_gift gt 0} 赠品 -->
		<span style="color:#FF0000">（{$lang.largess}）</span>
		<!-- {/if} -->
	<!-- {else} 优惠活动 -->
	{$goods.goods_name}
	<!-- {/if} -->
		</td>
	<!-- {if $show_goods_attribute eq 1} 显示商品属性 -->	
	<td bgcolor="#ffffff">{$goods.goods_attr|nl2br}</td>
	<!-- {/if} -->
	<!-- {if $show_marketprice} 显示市场价 -->
	<td align="right" bgcolor="#ffffff">{$goods.market_price}</td>
	<!-- {/if} -->
	<td align="right" bgcolor="#ffffff">{$goods.goods_price}</td>
	<td align="right" bgcolor="#ffffff">
		<!-- {if $goods.goods_id gt 0 && $goods.is_gift eq 0 && $goods.parent_id eq 0} 普通商品可修改数量 -->
		<input type="text" name="goods_number[{$goods.rec_id}]" id="goods_number_{$goods.rec_id}" value="{$goods.goods_number}" size="4" class="inputBg" style="text-align:center " />
		<!-- {else} -->
		{$goods.goods_number}
		<!-- {/if} -->
	</td>
	<td align="right" bgcolor="#ffffff">{$goods.subtotal}</td>
	<td align="center" bgcolor="#ffffff">
		<a href="javascript:if (confirm('{$lang.drop_goods_confirm}')) location.href='flow.php?step=drop_goods&amp;id={$goods.rec_id}'; " class="f6">{$lang.drop}</a>
		<!-- {if $smarty.session.user_id gt 0} 如果登录了，可以加入收藏 -->
		<a href="javascript:if (confirm('{$lang.drop_goods_confirm}')) location.href='flow.php?step=drop_to_collect&amp;id={$goods.rec_id}'; " class="f6">{$lang.drop_to_collect}</a>
		<!-- {/if} -->            </td>
</tr>
<!-- {/foreach} -->
</table>
</textarea>
<br />
<pre>
   <font class="f1">gallery.dwt:</font>
      商品相册修改为flash形式
 
</pre>
修改前：
<textarea>
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="Content-Type" content="text/html; charset=GBK" />
<title>{$gallery.goods_name} - {$gallery.img_desc}</title>
<link rel="shortcut icon" href="favicon.ico" >
<link rel="icon" href="animated_favicon.gif" type="image/gif" >
<link href="style.css" rel="stylesheet" type="text/css" />
</head>
<body>
<div align="center">
  <!-- {foreach from=$thumbs item=thumb} -->
  <a href="gallery.php?id={$gallery.goods_id}&amp;img={$thumb.img_id}"><img src="{if $thumb.thumb_url}{$thumb.thumb_url}{else}{$thumb.img_url}{/if}" alt="{$img_desc|escape:html}" /></a>
  <!-- {/foreach} -->
</div>
<div align="center" style="border-bottom: 1px solid #dadada; padding-bottom: 5px">
  <input type="button" onclick="location.href='gallery.php?id={$gallery.goods_id}&amp;img={$prev_img}'" value="&lt;">
  <input type="button" onclick="location.href='gallery.php?id={$gallery.goods_id}&amp;img={$next_img}'" value="&gt;">
</div>
<div align="center">
  <p><img src="{$gallery.img_url}" border="1" /></p>
  <p>{$gallery.img_desc}</p>
</div>
</body>
</html>
</textarea>
修改后：
<textarea>
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="Content-Type" content="text/html; charset=GBK" />
<title>{$gallery.goods_name} - {$shop_name}</title>
<link rel="shortcut icon" href="favicon.ico" >
<link rel="icon" href="animated_favicon.gif" type="image/gif" >
<link href="style.css" rel="stylesheet" type="text/css" />
<style>
body{margin:0;}
</style>
<script type="text/javascript">
{foreach from=$lang.gallery_js item=lang_js key=key}
var {$key} = '{$lang_js}';
{/foreach}
</script>
</head>
<body>
<div id="show-pic">
<embed src="data/images/pic-view.swf" quality="high" id="picview" flashvars="xml=<products name='{$gallery.goods_name}' shopname='{$shop_name}'>{foreach name=gallery_list from=$gallery.list item=photo}<smallpic{if $smarty.foreach.gallery_list.first} selected='selected'{/if}>{$photo.gallery_thumb}</smallpic><bigpic{if $smarty.foreach.gallery_list.first} selected='selected'{/if}>{$photo.gallery}</bigpic>{/foreach}</products>" pluginspage="http://www.macromedia.com/go/getflashplayer" type="application/x-shockwave-flash" width="100%" height="100%"></embed>
<script>
function windowClose()
{
    if(window.confirm(close_window))
    {
        window.close();
    }
}
</script>
</div>
</body>
</html>
</textarea>
<br />
<pre>
   <font class="f1">article.dwt:</font>
      文章地址增加rewrite path
 
</pre>
修改前：
<textarea>
 <!-- {if $article.content } -->
<div>{$article.content}</div>
<!-- {/if} -->
{if $article.open_type eq 2 or $article.open_type eq 1}<br />
<div><a href="{$article.file_url}" target="_blank">{$lang.relative_file}</a></div>
{/if} </div>
<!-- 上一篇文章 -->
{if $next_article}
	{$lang.next_article}:<a href="article.php?id={$next_article.article_id}">{$next_article.title}</a><br />
{/if}
<!-- 下一篇文章 -->
{if $prev_article}
	{$lang.prev_article}:<a href="article.php?id={$prev_article.article_id}">{$prev_article.title}</a><br />
{/if}
</textarea>
修改后：
<textarea>
<!-- {if $article.content } -->
{$article.content}
<!-- {/if} -->
{if $article.open_type eq 2 or $article.open_type eq 1}<br />
<div><a href="{$article.file_url}" target="_blank">{$lang.relative_file}</a></div>
{/if}
<div style="padding:8px; margin-top:15px; text-align:left; border-top:1px solid #ccc;">
<!-- 上一篇文章 -->
{if $next_article}
	{$lang.next_article}:<a href="{$next_article.url}" class="f6">{$next_article.title}</a><br />
{/if}
<!-- 下一篇文章 -->
{if $prev_article}
	{$lang.prev_article}:<a href="{$prev_article.url}" class="f6">{$prev_article.title}</a>
{/if}
</textarea>

<br />
<b>一、库文件：(共52个)</b><br />
1.新增
<pre>
   <font class="f1">新增留言列表库文件--message_list.lbi</font> 
</pre>
2.更改
<br />
<pre>
   <font class="f1">member_info.lbi:</font>
      去掉以前直接登录的表单，更改为点击“登录”按钮后在登录页面登录
 
</pre>
修改前：
<textarea>
<div id="append_parent"></div>
{if $user_info}
<div style="padding: 10px">
<div>{$lang.hello}，{$user_info.username}, {$lang.welcome_return}！</div>
<div>{$lang.now_account} {$user_info.user_money} {$lang.balance}，{$user_info.user_points}{$lang.along_with} {$user_info.user_bonus} {$lang.preferential}</div>
<div align="right">
<a href="#" onclick="pmwin('open')">{$lang.shot_message}</a> | 
<a href="user.php">{$lang.edit_user_info}</a> | <a href="user.php?act=logout">{$lang.logout}</a>
</div>
</div>
{else}
<form id="ECS_LOGINFORM" name="ECS_LOGINFORM" method="post" action="javascript:signIn()">
  <table width="100%" border="0">
    <tr>
      <td nowrap>{$lang.member_name}</td>
      <td><input name="username" style="width:60px;" type="text" class="textbox-light" size="8" tabindex="1" value="{$ecs_username|escape}"/></td>
      <td rowspan="2"><input type="image" name="imageField2" src="../images/btn_login.gif" tabindex="4" /></td>
    </tr>
    <tr>
      <td nowrap>{$lang.password}</td>
      <td><input name="password" style="width:60px;" class="textbox-light" type="password" size="10" tabindex="2" /></td>
    </tr>
    <!-- 判断是否启用验证码{if $enabled_captcha} -->
    <tr>
      <td nowrap>{$lang.comment_captcha}</td>
      <td colspan="2"><input type="text" size="5" name="captcha" class="textbox-light" tabindex="3" /></td>
    </tr>
    <tr>
      <td nowrap>&nbsp;</td>
      <td colspan="2"><img src="captcha.php?is_login=1&{$rand}" alt="captcha" style="vertical-align: middle;cursor: pointer;" onClick="this.src='captcha.php?is_login=1&'+Math.random()" /></td>
    </tr>
   <!--{/if}-->
    <tr>
      <td colspan="3"><ul>
          <li style="border-bottom: 1px dashed #CECECE;"><a href="user.php?act=register">{$lang.sign_up}</a></li>
          <li><a href="user.php?act=get_password">{$lang.forgot_password}</a></li>
        </ul></td>
    </tr>
  </table>
</form>
</textarea>
修改后：
<textarea>
{if $user_info}
<font style="position:relative; top:10px;">
{$lang.hello}，<font class="f4_b">{$user_info.username}</font>, {$lang.welcome_return}！
<a href="user.php">{$lang.user_center}</a>|
 <a href="user.php?act=logout">{$lang.user_logout}</a>
</font>
{else}
 {$lang.welcome}&nbsp;&nbsp;&nbsp;&nbsp;
 <a href="user.php"><img src="images/bnt_log.gif" /></a>
 <a href="user.php?act=register"><img src="images/bnt_reg.gif" /></a>
{/if}
</textarea>
<br />
<pre>
   <font class="f1">brands.lbi:</font>
      现在品牌logo在首页显示的数量
 
</pre>
修改前：
<textarea>
<!-- {if $brand_list} -->
<!-- 品牌区 -->
<div class="title-div"><img src="../images/brands.gif" alt="" width="158" height="39" /></div>
<div class="content-div">
  <div style="list-style: none; margin: 10px; padding: 0;">
    <!-- {foreach from=$brand_list item=brand} -->
    <!-- {if $brand.brand_logo} -->
    <a href="{$brand.url}"><img src="data/brandlogo/{$brand.brand_logo}" alt="{$brand.brand_name|escape:html} ({$brand.goods_num})" border="0" /></a>
    <!-- {else} -->
    <div><img src="images/cat_arrow.gif" alt="arrow" /> <a href="{$brand.url}">{$brand.brand_name|escape:html} {if $brand.goods_num}({$brand.goods_num}){/if}</a></div>
    <!-- {/if} -->
    <!-- {/foreach} -->
  </div>
</div>
<!-- {/if} -->
</textarea>
修改后：
<textarea>
<!-- {if $brand_list} -->
<!-- {foreach from=$brand_list item=brand name="brand_foreach"} -->
	{if $smarty.foreach.brand_foreach.index <= 11}
		<!-- {if $brand.brand_logo} -->
			<a href="{$brand.url}"><img src="data/brandlogo/{$brand.brand_logo}" alt="{$brand.brand_name|escape:html} ({$brand.goods_num})" /></a>
		<!-- {else} -->
		<div style="clear:both;">
			<a href="{$brand.url}">{$brand.brand_name|escape:html} {if $brand.goods_num}({$brand.goods_num}){/if}</a>
		</div>
		<!-- {/if} -->
	{/if}
<!-- {/foreach} -->
<div class="brandsMore"><a href="../brand.php"><img src="images/moreBrands.gif" /></a></div>
<!-- {/if} -->
</textarea>
<br />
<pre>
   <font class="f1">recommend_best.lbi:</font>
      显示分类下的“精品推荐”
 
</pre>
修改前：
<textarea>
<!-- {if $best_goods} -->
<div class="title-div clearfix">
<img src="../images/best_products.gif" alt="best products" width="158" height="39" />
</div>
<div class="content-div">
<!--{foreach from=$best_goods item=goods}-->
<table border="0" cellpadding="3" cellspacing="1" class="goods-table" style="float: left">
	<tr>
		<td align="center"><a href="{$goods.url}"><img src="{$goods.thumb}" border="0" alt="{$goods.name|escape:html}" class="thumb" /></a></td>
	</tr>
	<tr>
		<td><a href="{$goods.url}" title="{$goods.name|escape:html}">{$goods.short_style_name}</a><br />
			<!-- {if $goods.promote_price neq ""} -->
			{$lang.promote_price}<span class="goods-price">{$goods.promote_price}</span>
			<!-- {else}-->
			{$lang.shop_price}<span class="goods-price">{$goods.shop_price}</span>
			<!--{/if}-->
		</td>
	</tr>
</table>
<!--{/foreach}-->
<br style="clear:both"/>
<div style="text-align:right"><a href="../search.php?intro=best">more...</a></div>
</div>
<!-- {/if} -->
</textarea>
修改后：
<textarea>
<!-- {if $best_goods} -->
<!-- {if $cat_rec_sign neq 1} -->
<div class="box">
<div class="box_2 centerPadd">
  <div class="itemTit" id="itemBest">
      {if $cat_rec[1]}
      <h2><a href="javascript:void(0)" onclick="change_tab_style('itemBest', 'h2', this);get_cat_recommend(1, 0);">{$lang.all_goods}</a></h2>
      {foreach from=$cat_rec[1] item=rec_data}
      <h2 class="h2bg"><a href="javascript:void(0)" onclick="change_tab_style('itemBest', 'h2', this);get_cat_recommend(1, {$rec_data.cat_id})">
			{$rec_data.cat_name}</a></h2>
      {/foreach}
      {/if}
  </div>
  <div id="show_best_area" class="clearfix goodsBox">
  <!-- {/if} -->
  <!--{foreach from=$best_goods item=goods}-->
  <div class="goodsItem">
         <span class="best"></span>
           <a href="{$goods.url}"><img src="{$goods.thumb}" alt="{$goods.name|escape:html}" class="goodsimg" /></a><br />
           <!--<a href="javascript:addToCart({$goods.goods_id})"><img src="images/bnt_buy.gif" /></a> <a href="javascript:collect({$goods.goods_id});"><img src="images/bnt_coll.gif" /></a>-->
           <p><a href="{$goods.url}" title="{$goods.name|escape:html}">{$goods.short_style_name}</a></p>
           <font class="f1">
           <!-- {if $goods.promote_price neq ""} -->
          {$goods.promote_price}
          <!-- {else}-->
          {$goods.shop_price}
          <!--{/if}-->
           </font>
        </div>
  <!--{/foreach}-->
  <div class="more"><a href="../search.php?intro=best"><img src="images/more.gif" /></a></div>
  <!-- {if $cat_rec_sign neq 1} -->
  </div>
</div>
</div>
<div class="blank5"></div>
  <!-- {/if} -->
<!-- {/if} -->
</textarea>
<br />
<pre>
   <font class="f1">recommend_new.lbi:</font>
      显示分类下的“新品上架”
 
</pre>
修改前：
<textarea>
<!-- {if $new_goods}-->
<div class="title-div"><img src="../images/new_products.gif" alt="New products" width="158" height="39" /></div>
<div class="content-div">
<!--{foreach from=$new_goods item=goods}-->
<table border="0" cellpadding="3" cellspacing="1" class="goods-table" style="float: left">
	<tr>
		<td align="center"><a href="{$goods.url}"><img src="{$goods.thumb}" border="0" alt="{$goods.name|escape:html}" class="thumb" /></a></td>
	</tr>
	<tr>
		<td><a href="{$goods.url}" title="{$goods.name|escape:html}">{$goods.short_style_name}</a><br />
			<!-- {if $goods.promote_price neq ""} -->
			{$lang.promote_price}<span class="goods-price">{$goods.promote_price}</span>
			<!-- {else}-->
			{$lang.shop_price}<span class="goods-price">{$goods.shop_price}</span>
			<!--{/if}-->
		</td>
	</tr>
</table>
<!--{/foreach}-->
<br style="clear:both"/>
<div style="text-align:right"><a href="../search.php?intro=new">more...</a></div>
</div>
<!-- {/if} -->
</textarea>
修改后：
<textarea>
<!-- {if $new_goods} -->
<!-- {if $cat_rec_sign neq 1} -->
<div class="box">
<div class="box_2 centerPadd">
  <div class="itemTit New" id="itemNew">
      {if $cat_rec[2]}
      <h2><a href="javascript:void(0)" onclick="change_tab_style('itemNew', 'h2', this);get_cat_recommend(2, 0);">{$lang.all_goods}</a></h2>
      {foreach from=$cat_rec[2] item=rec_data}
      <h2 class="h2bg"><a href="javascript:void(0)" onclick="change_tab_style('itemNew', 'h2', this);get_cat_recommend(2, {$rec_data.cat_id})">{$rec_data.cat_name}</a></h2>
      {/foreach}
      {/if}
  </div>
  <div id="show_new_area" class="clearfix goodsBox">
  <!-- {/if} -->
  <!--{foreach from=$new_goods item=goods}-->
  <div class="goodsItem">
         <span class="news"></span>
           <a href="{$goods.url}"><img src="{$goods.thumb}" alt="{$goods.name|escape:html}" class="goodsimg" /></a><br />
           <!--<a href="javascript:addToCart({$goods.goods_id})"><img src="images/bnt_buy.gif" /></a> <a href="javascript:collect({$goods.goods_id});"><img src="images/bnt_coll.gif" /></a>-->
           <p><a href="{$goods.url}" title="{$goods.name|escape:html}">{$goods.short_style_name}</a></p>
           <font class="f1">
           <!-- {if $goods.promote_price neq ""} -->
          {$goods.promote_price}
          <!-- {else}-->
          {$goods.shop_price}
          <!--{/if}-->
           </font>
        </div>
  <!--{/foreach}-->
  <div class="more"><a href="../search.php?intro=new"><img src="images/more.gif" /></a></div>
  <!-- {if $cat_rec_sign neq 1} -->
  </div>
</div>
</div>
<div class="blank5"></div>
  <!-- {/if} -->
<!-- {/if} -->
</textarea>
<br />
<pre>
   <font class="f1">recommend_hot.lbi:</font>
      显示分类下的“热卖商品”
 
</pre>
修改前：
<textarea>
<!-- {if $hot_goods} -->
<div class="title-div"><img src="../images/hot_products.gif" alt="Hot products" width="158" height="39" /></div>
<div class="content-div">
<!--{foreach from=$hot_goods item=goods}-->
<table border="0" cellpadding="3" cellspacing="1" class="goods-table" style="float: left">
	<tr>
		<td align="center"><a href="{$goods.url}"><img src="{$goods.thumb}" border="0" alt="{$goods.name|escape:html}" class="thumb" /></a></td>
	</tr>
	<tr>
		<td><a href="{$goods.url}" title="{$goods.name|escape:html}">{$goods.short_style_name}</a><br />
			<!-- {if $goods.promote_price neq ""} -->
			{$lang.promote_price}<span class="goods-price">{$goods.promote_price}</span>
			<!-- {else}-->
			{$lang.shop_price}<span class="goods-price">{$goods.shop_price}</span>
			<!--{/if}-->
		</td>
	</tr>
</table>
<!--{/foreach}-->
<br style="clear:both"/>
<div style="text-align:right"><a href="../search.php?intro=hot">more...</a></div>
</div>
<!-- {/if} -->
</textarea>
修改后：
<textarea>
<!-- {if $hot_goods} -->
<!-- {if $cat_rec_sign neq 1} -->
<div class="box">
<div class="box_2 centerPadd">
  <div class="itemTit Hot" id="itemHot">
      {if $cat_rec[3]}
      <h2><a href="javascript:void(0)" onclick="change_tab_style('itemHot', 'h2', this);get_cat_recommend(3, 0);">{$lang.all_goods}</a></h2>
      {foreach from=$cat_rec[3] item=rec_data}
      <h2 class="h2bg"><a href="javascript:void(0)" onclick="change_tab_style('itemHot', 'h2', this);get_cat_recommend(3, {$rec_data.cat_id})">{$rec_data.cat_name}</a></h2>
      {/foreach}
      {/if}
  </div>
  <div id="show_hot_area" class="clearfix goodsBox">
  <!-- {/if} -->
  <!--{foreach from=$hot_goods item=goods}-->
  <div class="goodsItem">
         <span class="hot"></span>
           <a href="{$goods.url}"><img src="{$goods.thumb}" alt="{$goods.name|escape:html}" class="goodsimg" /></a><br />
           <!--<a href="#"><img src="images/bnt_buy.gif" /></a> <a href="#"><img src="images/bnt_coll.gif" /></a>-->
           <p><a href="{$goods.url}" title="{$goods.name|escape:html}">{$goods.short_style_name}</a></p>
           <font class="f1">
           <!-- {if $goods.promote_price neq ""} -->
          {$goods.promote_price}
          <!-- {else}-->
          {$goods.shop_price}
          <!--{/if}-->
           </font>
        </div>
  <!--{/foreach}-->
  <div class="more"><a href="../search.php?intro=hot"><img src="images/more.gif" /></a></div>
  <!-- {if $cat_rec_sign neq 1} -->
  </div>
</div>
</div>
<div class="blank5"></div>
  <!-- {/if} -->
<!-- {/if} -->
</textarea>
<br />
<pre>
   <font class="f1">goods_attrlinked.lbi:</font>
      模板变量名称冲突
 
</pre>
修改前：
<textarea>
<!-- 开始循环属性关联的商品 {foreach from=$attribute_linked item=linked}-->
<!-- {if $linked.goods} -->
<div class="title-div"><img src="../images/blue_arrow.gif" alt="arrow" />{$linked.title}</div>
<div class="content-div">
  <ul class="history-list">
  <!-- {foreach from=$linked.goods item=goods} -->
  <li><a href="{$goods.url}" title="{$goods.goods_name|escape:html}">{$goods.short_name|escape:html}</a></li>
  <!-- {/foreach} -->
  </ul>
</div>
<!-- {/if} -->
<!-- 结束属性关联的商品 {/foreach}-->
</textarea>
修改后：
<textarea>
<!-- 开始循环属性关联的商品 {foreach from=$attribute_linked item=linked}-->
<!-- {if $linked.goods} -->
<div class="box">
 <div class="box_1">
  <h3><span title="{$linked.title}">{$linked.title|truncate:11:"...":true}</span></h3>
  <div class="boxCenterList RelaArticle">
  <!-- {foreach from=$linked.goods item=linked_goods_data} -->
  <a href="{$linked_goods_data.url}" title="{$linked_goods_data.goods_name|escape:html}">{$linked_goods_data.short_name|escape:html}</a><br />
  <!-- {/foreach} -->
  </div>
 </div>
</div>
<div class="blank5"></div>
<!-- {/if} -->
<!-- 结束属性关联的商品 {/foreach}-->
</textarea>


</body>
</html>
